{"ast":null,"code":"import React,{useState,useEffect,useRef,useCallback}from'react';import LanternEffect from'./components/LanternEffect';import SwitchLantern from'./components/SwitchLantern';import NeonSign from'./components/NeonSign';import StartButton from'./components/StartButton';import Corkboard from'./components/Corkboard';import ClueMap from'./components/ClueMap';import CaseModal from'./components/CaseModal';import AboutSofia from'./components/AboutSofia';import ContactForm from'./components/ContactForm';import Extras from'./components/Extras';import Lightning from'./components/Lightning';import MuteThunderButton from'./components/MuteThunderButton';import styles from'./App.module.css';import projectsData from'./data/projects.json';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const soundFiles=[{name:'Chuva na Madrugada',file:process.env.PUBLIC_URL+'/sounds/chuva.mp3',icon:'🌧️',volume:0.05},{name:'Jazz do Clube Secreto',file:process.env.PUBLIC_URL+'/sounds/jazz.mp3',icon:'🎷',volume:0.8},{name:'Passos no Beco',file:process.env.PUBLIC_URL+'/sounds/passos.mp3',icon:'👣',volume:0.6}];function App(){const[started,setStarted]=useState(false);const[isLanternMode,setIsLanternMode]=useState(true);const[modalOpen,setModalOpen]=useState(false);const[selectedCase,setSelectedCase]=useState(null);const[unlockedCases,setUnlockedCases]=useState([]);const lightningRef=useRef(null);const[isThunderMuted,setIsThunderMuted]=useState(false);// Controle de áudio centralizado\nconst audioRefs=useRef([]);const[playingSounds,setPlayingSounds]=useState(new Set());const toggleSound=useCallback((soundFile,index,volume)=>{const audio=audioRefs.current[index];if(!audio)return;setPlayingSounds(prevPlayingSounds=>{const newPlayingSounds=new Set(prevPlayingSounds);if(newPlayingSounds.has(soundFile)){audio.pause();newPlayingSounds.delete(soundFile);}else{audio.volume=volume;audio.play();newPlayingSounds.add(soundFile);}return newPlayingSounds;});},[]);// Efeito para iniciar os sons quando a investigação começa\nuseEffect(()=>{if(started){// Inicia Jazz, Passos e Chuva com seus volumes definidos\nconst jazz=soundFiles[1];const passos=soundFiles[2];const chuva=soundFiles[0];toggleSound(jazz.file,1,jazz.volume);toggleSound(passos.file,2,passos.volume);toggleSound(chuva.file,0,chuva.volume);}},[started,toggleSound]);// Efeito de raio aleatório\nuseEffect(()=>{let timeout;const scheduleLightning=()=>{const randomInterval=Math.random()*25000+15000;// Entre 15 e 40 segundos\ntimeout=setTimeout(()=>{if(!isThunderMuted&&lightningRef.current){lightningRef.current.flash();}scheduleLightning();},randomInterval);};scheduleLightning();return()=>clearTimeout(timeout);},[isThunderMuted]);return/*#__PURE__*/_jsxs(LanternEffect,{isLanternMode:isLanternMode,children:[/*#__PURE__*/_jsx(Lightning,{ref:lightningRef}),/*#__PURE__*/_jsxs(\"div\",{className:styles.uiControls,children:[/*#__PURE__*/_jsx(SwitchLantern,{isLanternMode:isLanternMode,setIsLanternMode:setIsLanternMode}),/*#__PURE__*/_jsx(MuteThunderButton,{isMuted:isThunderMuted,setIsMuted:setIsThunderMuted})]}),soundFiles.map((sound,index)=>/*#__PURE__*/_jsx(\"audio\",{ref:el=>audioRefs.current[index]=el,src:sound.file,loop:true},sound.file)),/*#__PURE__*/_jsxs(\"div\",{className:styles.mainBg,children:[!started?/*#__PURE__*/_jsxs(\"div\",{className:styles.introContainer,children:[/*#__PURE__*/_jsx(NeonSign,{}),/*#__PURE__*/_jsx(StartButton,{onClick:()=>setStarted(true)})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(NeonSign,{}),/*#__PURE__*/_jsxs(\"div\",{className:styles.mainContent,children:[/*#__PURE__*/_jsx(Corkboard,{projetos:projectsData,isLanternMode:isLanternMode,onCaseClick:c=>{setSelectedCase(c);setModalOpen(true);}}),/*#__PURE__*/_jsx(ClueMap,{projetos:projectsData,unlocked:unlockedCases})]}),/*#__PURE__*/_jsx(AboutSofia,{isLanternMode:isLanternMode}),/*#__PURE__*/_jsx(ContactForm,{}),/*#__PURE__*/_jsx(Extras,{soundFiles:soundFiles,playingSounds:playingSounds,toggleSound:toggleSound})]}),modalOpen&&/*#__PURE__*/_jsx(CaseModal,{projeto:selectedCase,onClose:()=>{console.log('Modal fechado, caso selecionado:',selectedCase);setModalOpen(false);if(selectedCase&&!unlockedCases.includes(selectedCase.id)){console.log('Desbloqueando caso:',selectedCase.id);setUnlockedCases([...unlockedCases,selectedCase.id]);}}})]})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","LanternEffect","SwitchLantern","NeonSign","StartButton","Corkboard","ClueMap","CaseModal","AboutSofia","ContactForm","Extras","Lightning","MuteThunderButton","styles","projectsData","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","soundFiles","name","file","process","env","PUBLIC_URL","icon","volume","App","started","setStarted","isLanternMode","setIsLanternMode","modalOpen","setModalOpen","selectedCase","setSelectedCase","unlockedCases","setUnlockedCases","lightningRef","isThunderMuted","setIsThunderMuted","audioRefs","playingSounds","setPlayingSounds","Set","toggleSound","soundFile","index","audio","current","prevPlayingSounds","newPlayingSounds","has","pause","delete","play","add","jazz","passos","chuva","timeout","scheduleLightning","randomInterval","Math","random","setTimeout","flash","clearTimeout","children","ref","className","uiControls","isMuted","setIsMuted","map","sound","el","src","loop","mainBg","introContainer","onClick","mainContent","projetos","onCaseClick","c","unlocked","projeto","onClose","console","log","includes","id"],"sources":["C:/Users/pedro/OneDrive/Área de Trabalho/portfolionew/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\r\nimport LanternEffect from './components/LanternEffect';\r\nimport SwitchLantern from './components/SwitchLantern';\r\nimport NeonSign from './components/NeonSign';\r\nimport StartButton from './components/StartButton';\r\nimport Corkboard from './components/Corkboard';\r\nimport ClueMap from './components/ClueMap';\r\nimport CaseModal from './components/CaseModal';\r\nimport AboutSofia from './components/AboutSofia';\r\nimport ContactForm from './components/ContactForm';\r\nimport Extras from './components/Extras';\r\nimport Lightning from './components/Lightning';\r\nimport MuteThunderButton from './components/MuteThunderButton';\r\nimport styles from './App.module.css';\r\nimport projectsData from './data/projects.json';\r\n\r\nconst soundFiles = [\r\n  { name: 'Chuva na Madrugada', file: process.env.PUBLIC_URL + '/sounds/chuva.mp3', icon: '🌧️', volume: 0.05 },\r\n  { name: 'Jazz do Clube Secreto', file: process.env.PUBLIC_URL + '/sounds/jazz.mp3', icon: '🎷', volume: 0.8 },\r\n  { name: 'Passos no Beco', file: process.env.PUBLIC_URL + '/sounds/passos.mp3', icon: '👣', volume: 0.6 },\r\n];\r\n\r\nfunction App() {\r\n  const [started, setStarted] = useState(false);\r\n  const [isLanternMode, setIsLanternMode] = useState(true);\r\n  const [modalOpen, setModalOpen] = useState(false);\r\n  const [selectedCase, setSelectedCase] = useState(null);\r\n  const [unlockedCases, setUnlockedCases] = useState([]);\r\n  const lightningRef = useRef(null);\r\n  const [isThunderMuted, setIsThunderMuted] = useState(false);\r\n  \r\n  // Controle de áudio centralizado\r\n  const audioRefs = useRef([]);\r\n  const [playingSounds, setPlayingSounds] = useState(new Set());\r\n\r\n  const toggleSound = useCallback((soundFile, index, volume) => {\r\n    const audio = audioRefs.current[index];\r\n    if (!audio) return;\r\n\r\n    setPlayingSounds(prevPlayingSounds => {\r\n      const newPlayingSounds = new Set(prevPlayingSounds);\r\n      if (newPlayingSounds.has(soundFile)) {\r\n        audio.pause();\r\n        newPlayingSounds.delete(soundFile);\r\n      } else {\r\n        audio.volume = volume;\r\n        audio.play();\r\n        newPlayingSounds.add(soundFile);\r\n      }\r\n      return newPlayingSounds;\r\n    });\r\n  }, []);\r\n  \r\n  // Efeito para iniciar os sons quando a investigação começa\r\n  useEffect(() => {\r\n    if (started) {\r\n      // Inicia Jazz, Passos e Chuva com seus volumes definidos\r\n      const jazz = soundFiles[1];\r\n      const passos = soundFiles[2];\r\n      const chuva = soundFiles[0];\r\n      \r\n      toggleSound(jazz.file, 1, jazz.volume);\r\n      toggleSound(passos.file, 2, passos.volume);\r\n      toggleSound(chuva.file, 0, chuva.volume);\r\n    }\r\n  }, [started, toggleSound]);\r\n\r\n  // Efeito de raio aleatório\r\n  useEffect(() => {\r\n    let timeout;\r\n    const scheduleLightning = () => {\r\n      const randomInterval = Math.random() * 25000 + 15000; // Entre 15 e 40 segundos\r\n      timeout = setTimeout(() => {\r\n        if (!isThunderMuted && lightningRef.current) {\r\n          lightningRef.current.flash();\r\n        }\r\n        scheduleLightning();\r\n      }, randomInterval);\r\n    };\r\n\r\n    scheduleLightning();\r\n\r\n    return () => clearTimeout(timeout);\r\n  }, [isThunderMuted]);\r\n\r\n  return (\r\n    <LanternEffect isLanternMode={isLanternMode}>\r\n      <Lightning ref={lightningRef} />\r\n      <div className={styles.uiControls}>\r\n        <SwitchLantern isLanternMode={isLanternMode} setIsLanternMode={setIsLanternMode} />\r\n        <MuteThunderButton isMuted={isThunderMuted} setIsMuted={setIsThunderMuted} />\r\n      </div>\r\n      {/* Elementos de áudio agora vivem aqui */}\r\n      {soundFiles.map((sound, index) => (\r\n        <audio\r\n          key={sound.file}\r\n          ref={el => audioRefs.current[index] = el}\r\n          src={sound.file}\r\n          loop\r\n        />\r\n      ))}\r\n      <div className={styles.mainBg}>\r\n        {!started ? (\r\n          <div className={styles.introContainer}>\r\n            <NeonSign />\r\n            <StartButton onClick={() => setStarted(true)} />\r\n          </div>\r\n        ) : (\r\n          <>\r\n            <NeonSign />\r\n            <div className={styles.mainContent}>\r\n              <Corkboard \r\n                projetos={projectsData}\r\n                isLanternMode={isLanternMode}\r\n                onCaseClick={c => { setSelectedCase(c); setModalOpen(true); }} \r\n              />\r\n              <ClueMap projetos={projectsData} unlocked={unlockedCases} />\r\n            </div>\r\n            <AboutSofia isLanternMode={isLanternMode} />\r\n            <ContactForm />\r\n            <Extras \r\n              soundFiles={soundFiles}\r\n              playingSounds={playingSounds}\r\n              toggleSound={toggleSound}\r\n            />\r\n          </>\r\n        )}\r\n        {modalOpen && (\r\n          <CaseModal \r\n            projeto={selectedCase} \r\n            onClose={() => {\r\n              console.log('Modal fechado, caso selecionado:', selectedCase);\r\n              setModalOpen(false);\r\n              if (selectedCase && !unlockedCases.includes(selectedCase.id)) {\r\n                console.log('Desbloqueando caso:', selectedCase.id);\r\n                setUnlockedCases([...unlockedCases, selectedCase.id]);\r\n              }\r\n            }} \r\n          />\r\n        )}\r\n      </div>\r\n    </LanternEffect>\r\n  );\r\n}\r\n\r\nexport default App; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}